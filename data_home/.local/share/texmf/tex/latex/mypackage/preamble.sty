% A lot burrowed from https://github.com/gillescastel/university-setup/blob/master/preamble.tex under MIT

% Process Options
\newif\if@hw\@hwfalse
\DeclareOption{hw}{\@hwtrue}

\ProcessOptions\relax

% Packages
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage{textcomp}
\RequirePackage{graphicx}
\RequirePackage{enumitem}
\RequirePackage{mathrsfs}

% Space between paragraphs
\RequirePackage{parskip}

% No page numbers on empty pages
\RequirePackage{emptypage}

% Math packages
\RequirePackage{amsmath, amsfonts, mathtools, amsthm, amssymb}
\RequirePackage{amsthm}

% Generate index
\RequirePackage{makeidx}
\makeindex

% Hyperlink in ToC

\if@hw\else
\RequirePackage{color}   %May be necessary if you want to color links
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=true, %set true if you want colored links
  linktoc=all,     %set to all if you want both sections and subsections linked
  linkcolor=blue,  %choose some color if you want links to stand out
}

% Set ToC depth to only show up to sections
\setcounter{tocdepth}{1}


% Theorem, definition enviroments
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{prop}{Proposition}[section]


\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{example}{Example}[section]

\theoremstyle{remark}
\newtheorem*{notation}{Notation}
\newtheorem*{remark}{Remark}

\fi


% \lecture starts a new lecture
%
% Usage:
% \lecture{1}{October 1, 2019}{Foobar}
%
% Adds a section heading with number + title of lecture
\RequirePackage{xifthen}
\def\@lecture{}
\newcommand{\lecture}[3]{
  \ifthenelse{\isempty{#3}}{
    \def\@lecture{Lecture #1}
  }{
    \def\@lecture{Lecture #1: #3}
  }
  \subsection*{\@lecture}
  \marginpar{\small\textsf{\mbox{#2}}}
}

% Fancy headers
\RequirePackage{fancyhdr}
\pagestyle{fancy}
% LE: left even
% RO: right odd
% CE, CO: center even, center odd

% \fancyhead[RO,LE]{Ilay Raz}

\fancyhead[RO,LE]{\@lecture}
\fancyhead[RE,LO]{}
\fancyfoot[RO,LE]{\thepage}
\fancyfoot[RE,LO]{}
\fancyfoot[C]{\leftmark}


% Commands

% Groups
\newcommand{\normal}{\trianglelefteq}

% Rings and Fields
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\HH}{\mathbb{H}}
\newcommand{\F}{\mathbb{F}}

% Sets
\let\originalemptyset\emptyset
\renewcommand{\emptyset}{\varnothing}
\newcommand{\ps}{\mathcal{P}}
\DeclarePairedDelimiterX\set[1]\lbrace\rbrace{\def\given{\;\delimsize\vert\;}#1}

% Delimiters
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}

% Not implies
\newcommand{\nimplies}{
  \mathrel{{\ooalign{\hidewidth$\not\phantom{=}$\hidewidth\cr$\implies$}}}}

% Operators
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\Inv}{Inv}
\DeclareMathOperator{\GCD}{GCD}
\DeclareMathOperator{\LCM}{LCM}
\DeclareMathOperator{\Det}{Det}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Ord}{Ord}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Orb}{Orb}
\DeclareMathOperator{\Char}{Char}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\Log}{Log}
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Dim}{Dim}
\DeclareMathOperator{\Deg}{Deg}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\Out}{Out}

% Groups
\DeclareMathOperator{\Cy}{C}
\DeclareMathOperator{\Di}{D}
\DeclareMathOperator{\Sy}{S}
\DeclareMathOperator{\Al}{A}

% Real Imaginary part functions
\let\Re\relax
\DeclareMathOperator{\Re}{Re}
\let\Im\relax
\DeclareMathOperator{\Im}{Im}

% 2x2 matrix
\newcommand{\Matrix}[4]{\left(\begin{array}{cc}  #1 & #2 \\  #3 & #4 \\
\end{array} \right) }

% misc
\newcommand{\iso}{\cong}

\RequirePackage{stmaryrd} % For lightning
\newcommand{\contra}{\scalebox{1.5}{$\lightning$}}
